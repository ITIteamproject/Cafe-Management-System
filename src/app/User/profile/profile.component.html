<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<app-toolbar></app-toolbar>
<div class="backg" fxLayoutAlign="center">

    <!-- Profile content -->
    <div class="container2" fxLayout.lt-lg="column">
        <div class="left_side">
            <div class="profileText">
                <div class="imgBx">
                    <img [src]="userImage" alt="">
                </div>
                <h2>{{userInfo?.username}}</h2>
                <h4 style="color: white;">{{userInfo?.email}} </h4>
                <form>
                    <input type="file" id="myFile" name="userImage" class="w-100 finp" style="display:block;" (change)="onChange($event)">
                    <input type="button" value="Change" class="mt-3 change finp" (click)="changeUserImage()">
                </form>
            </div>
            <div class="Info">
                <h3 fxLayoutAlign="center" class="title">Your Information</h3>
                <ul>
                    <li>
                        <span class="icon"></span>
                        <span class="text">
                            {{userInfo?.username}}
                        </span>
                    </li>
                    <li>
                        <span class="icon"></span>
                        <span class="text">
                            {{userInfo?.email}}
                        </span>
                    </li>
                    <li>
                        <span class="icon"></span>
                        <span class="text">
                            {{userInfo?.gender}}
                        </span>
                    </li>
                </ul>
            </div>

        </div>
        <div class="right_side">
            <mat-tab-group mat-stretch-tabs class="example-stretched-tabs" animationDuration="400ms" color="primary">

                <!-- orders table -->

                <mat-tab label="User Order">
                    <ng-template mat-tab-label>
                        <mat-icon>update</mat-icon>
                        User Order
                    </ng-template>
                    <!-- user orders -->
                    <table mat-table [dataSource]="userOrders" class="mat-elevation-z8">

                        <!--- Note that these columns can be defined in any order.
                          The actual rendered columns are set as a property on the row definition" -->

                        <!-- name Column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef> Name </th>
                            <td mat-cell *matCellDef="let element"> {{element.productId.name}} </td>
                        </ng-container>

                        <!-- price Column -->
                        <ng-container matColumnDef="price">
                            <th mat-header-cell *matHeaderCellDef> Price </th>
                            <td mat-cell *matCellDef="let element"> {{element.productId.price}} </td>
                        </ng-container>

                        <!-- status Column -->
                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef> Status</th>
                            <td mat-cell *matCellDef="let element"> {{element.status}} </td>
                        </ng-container>

                        <!-- amount Column -->
                        <ng-container matColumnDef="amount">
                            <th mat-header-cell *matHeaderCellDef> Amount</th>
                            <td mat-cell *matCellDef="let element"> {{element.amount}} </td>
                        </ng-container>

                        <!-- total price Column -->
                        <ng-container matColumnDef="totalPrice">
                            <th mat-header-cell *matHeaderCellDef> Total Price</th>
                            <td mat-cell *matCellDef="let element"> {{element.totalPrice}} </td>
                        </ng-container>

                        <!-- cancel Column -->
                        <ng-container matColumnDef="cancel">
                            <th mat-header-cell *matHeaderCellDef> Cancel Order</th>
                            <td mat-cell *matCellDef="let element"> <button *ngIf="element.status=='pending'"
                                    type="button" (click)="cancelOrder(element._id)" style="background-color:#432f22; color:white;width:100px;">cancel</button> </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="ordersColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: ordersColumns;"></tr>
                    </table>
                </mat-tab>


                <!-- orders table -->


                <!-- first -->
                <!-- <mat-tab label="User Order">
                    <ng-template mat-tab-label>
                        <mat-icon>update</mat-icon>
                        User Order
                    </ng-template>
                    <div class="recentOrders">
                        <div class="cardHeader">
                            <h2>Recent Orders</h2>
                            <a href="#" class="btn">View All</a>
                        </div>

                        <table>
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Price</td>
                                    <td>Payment</td>
                                    <td>Status</td>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td>Coffee 1</td>
                                    <td>$1200</td>
                                    <td>Paid</td>
                                    <td><span class="status delivered">Delivered</span></td>
                                </tr>

                                <tr>
                                    <td>Coffee 1</td>
                                    <td>$110</td>
                                    <td>Due</td>
                                    <td><span class="status pending">Pending</span></td>
                                </tr>

                                <tr>
                                    <td>Coffee 1</td>
                                    <td>$1200</td>
                                    <td>Paid</td>
                                    <td><span class="status return">Return</span></td>
                                </tr>

                                <tr>
                                    <td>Coffee 1</td>
                                    <td>$620</td>
                                    <td>Due</td>
                                    <td><span class="status inProgress">In Progress</span></td>
                                </tr>

                                <tr>
                                    <td>Coffee 1</td>
                                    <td>$1200</td>
                                    <td>Paid</td>
                                    <td><span class="status delivered">Delivered</span></td>
                                </tr>

                                <tr>
                                    <td>Coffee 1</td>
                                    <td>$110</td>
                                    <td>Due</td>
                                    <td><span class="status pending">Pending</span></td>
                                </tr>

                                <tr>
                                    <td>Coffee 1</td>
                                    <td>$1200</td>
                                    <td>Paid</td>
                                    <td><span class="status return">Return</span></td>
                                </tr>

                                <tr>
                                    <td>Coffee 1</td>
                                    <td>$620</td>
                                    <td>Due</td>
                                    <td><span class="status inProgress">In Progress</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </mat-tab> -->
                <!-- Tab 2 -->

                <mat-tab label="Update Password">
                    <ng-template mat-tab-label>
                        <mat-icon>lock</mat-icon>
                        Update Password
                    </ng-template>
                    <form>
                        <div class="pass">
                            <mat-form-field>
                                <mat-label>Old Password</mat-label>
                                <input matInput placeholder="Old Password" type="password" required minlength="6"
                                    name="password" ngModel #password="ngModel">
                                <mat-error *ngIf="password.errors && password.hasError('required')">
                                    Password is required
                                </mat-error>
                                <mat-error *ngIf="password.errors && password.errors?.['minlength']">
                                    Password must be of length 6
                                </mat-error>
                                <mat-icon matSuffix>lock</mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="pass">
                            <mat-form-field>
                                <mat-label>New Password</mat-label>
                                <input matInput placeholder="New Password" type="password" required minlength="6"
                                    name="new password" ngModel #passwordn="ngModel">
                                <mat-error *ngIf="passwordn.errors && passwordn.hasError('required')">
                                    Password is required
                                </mat-error>
                                <mat-error *ngIf="passwordn.errors && passwordn.errors?.['minlength']">
                                    Password must be of length 6
                                </mat-error>
                                <mat-icon matSuffix>lock</mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="repass">
                            <mat-form-field>
                                <mat-label>Re-enter password</mat-label>
                                <input matInput placeholder="New Password" type="password" required minlength="6"
                                    name="repassword" ngModel #repassword="ngModel">
                                <mat-error *ngIf="repassword.errors && repassword.hasError('required') ">
                                    Re-Enter Password is required
                                </mat-error>
                                <mat-error *ngIf="repassword.errors?.['minlength']">
                                    Password must be of length 6
                                </mat-error>
                                <mat-icon matSuffix>lock</mat-icon>
                            </mat-form-field>
                        </div>
                        <button (click)="changePasswd(password.value, passwordn.value, repassword.value)"
                            mat-raised-button style="background-color: #432f22; color: white; font-size: 1.5rem;"
                            class="login-button">
                            Save
                        </button>
                    </form>
                </mat-tab>
                <!-- Next -->
                <mat-tab label="Profile Setting">
                    <ng-template mat-tab-label>
                        <mat-icon>settings</mat-icon>
                        Profile Settings
                    </ng-template>
                    <form>
                        <div class="name">
                            <mat-form-field appearance="fill">
                                <mat-label>Full Name</mat-label>
                                <input #username matInput type="text" placeholder="Full Name">
                                <mat-icon matSuffix>man</mat-icon>
                            </mat-form-field>

                        </div>
                        <!-- <div class="tel">
                            <mat-form-field class="example-full-width">
                                <mat-label>Telephone</mat-label>

                                <input type="tel" matInput placeholder="0125-555-1234">
                                <mat-icon matSuffix>mode_edit</mat-icon>
                            </mat-form-field>
                        </div> -->
                        <div class="email">

                            <mat-form-field class="example-full-width">
                                <mat-label>Email</mat-label>
                                <input #email type="email" matInput placeholder="Ex. pat@example.com">
                                <mat-icon matSuffix>email</mat-icon>
                            </mat-form-field>
                        </div>
                        <!-- <div class="address">
                            <mat-form-field appearance="fill">
                                <mat-label>Gender</mat-label>
                                <input #gender type="radio" matInput>
                                <mat-icon matSuffix>home</mat-icon>
                            </mat-form-field>
                        </div> -->
                        <mat-radio-group class="gender-radio" aria-label="Select an option">
                            <mat-radio-button name="gender" value="male"
                                (change)="genderChanged($event.value)">male</mat-radio-button>
                            <mat-radio-button name="gender" value="female"
                                (change)="genderChanged($event.value)">female</mat-radio-button>
                        </mat-radio-group>

                        <button (click)="changeInfo(username.value, email.value)" mat-raised-button
                            style="background-color: #432f22; color: white; font-size: 1.5rem;" class="login-button">
                            Save
                        </button>
                    </form>
                </mat-tab>

            </mat-tab-group>
        </div>

    </div>
</div>
<app-footer></app-footer>